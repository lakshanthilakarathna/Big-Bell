server {
  listen 80 default_server;
  listen [::]:80 default_server;

  # IP-only (catch-all)
  server_name _;

  # Repo root contains index.html, assets/, etc.
  root /var/www/firbrigs;
  index index.html;

  # Canonical landing URL: redirect /index.html -> /
  location = /index.html {
    return 301 /;
  }

  location / {
    try_files $uri $uri/ =404;
  }

  # PHP endpoint for contact form
  location ~ \.php$ {
    include snippets/fastcgi-php.conf;

    # Adjust socket to your PHP version (check: ls /run/php/)
    fastcgi_pass unix:/run/php/php8.3-fpm.sock;
  }

  # Deny hidden files
  location ~ /\. {
    deny all;
  }
}

